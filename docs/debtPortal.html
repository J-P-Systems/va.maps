<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Use Case Debt Portal - US Veterans Health Administration FHIR Map Set Implementation Guide v1.5.11</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
  	<link href="assets/css/cqf.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
    <link href="assets/css/va-maps.css" rel="stylesheet"/>

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"4.2"}
    h3,h4,h5,h6{--heading-prefix:"4.2"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->

        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
    <a id="family-logo" no-external="true" href="https://va.gov"><img height="50" alt="Visit the VA website"
        src="assets/images/va.png" /> </a>
</div>

<div id="family-nav">
    <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="50" alt="Visit the FHIR website" src="assets/images/fhir-logo-www.png"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">US Veterans Health Administration FHIR Map Set Implementation Guide</span>
            <br/>
            <span style="display:inline-block;">1.5.11 - 250601



  <img alt="United States of America flag" src="assets/images/usa.svg" height="16" title="United States of America"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Background
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="process.html">Process</a>
      </li>
      <li>
        <a href="profileHierarchy.html">Profile Hierarchy</a>
      </li>
      <li>
        <a href="designPatterns.html">FHIR Design Patterns</a>
      </li>
      <li>
        <a href="classes.html">Classes</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Use Cases
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="overview.html">Overview</a>
      </li>
      <li>
        <a href="debtPortal.html">Debt Portal</a>
      </li>
      <li>
        <a href="vitals.html">Vitals</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">FHIR Artifacts
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="artifacts.html">Artifacts</a>
      </li>
      <li>
        <a href="extensions.html">Extensions</a>
      </li>
      <li>
        <a href="mustSupport.html">Must Support</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="changes.html">Changes</a>
  </li>
  <li>
    <a href="history.html">History</a>
  </li>
  <li>
    <a href="mapset-qa.html">MapSet QA</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='0uc.html'><b>0 Uc</b></a></li><li><b>Use Case Debt Portal</b></li>

          <span style="float:right;">

            <a href="overview.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="vitals.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Publication Build: This will be filled in by the publication tooling</p><!--EndReleaseHeader-->
  <h2>Use Case Debt Portal</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#current-process" id="markdown-toc-current-process">Current Process</a></li>
  <li><a href="#technical-understanding" id="markdown-toc-technical-understanding">Technical Understanding</a></li>
  <li><a href="#fhir-analysis-and-design" id="markdown-toc-fhir-analysis-and-design">FHIR Analysis and Design</a></li>
  <li><a href="#debt-portal-conceptual-diagram" id="markdown-toc-debt-portal-conceptual-diagram">Debt Portal Conceptual Diagram</a></li>
</ul>

</div>
<h3 id="current-process">Current Process</h3>

<p>As a veteran incurs co-pay charges, they have a monthly statement generated on a pre-defined day of the month (<a href="https://vivian.worldvista.org/dox/Global_XlJDRCgzNDA=.html">AR DEBTOR</a> – STATEMENT DAY, 340-.03). Each veteran is assigned a day that does not change; this varied day is to prevent the Consolidated Copayment Processing Center (CCPC), location where statement printing happens, from being overwhelmed if they were to have to print all the statements at beginning or the end of the month.</p>

<p>The statement data is gathered in the CCPC file can be found in VistA file 349.2, however the data is pulled from the Accounts Receivable (VistA file 430) and supporting VistA files.</p>

<p>The co-pay charges include prescriptions, outpatient visits, and inpatient stays. These charges are “billed” as they happen, meaning they will appear in the Accounts Receivable file with a billing reference number, but are not billed to the veteran until the monthly statement runs. There are times that more than one charge can be part of a billing reference; however, these specific details are unknown as to why or when they happen.</p>

<p>The Financial Management team (formerly known as VODA (Veteran Online Debt Access) team) maintains a portal where veterans can view their debt and copays online. They receive a copy of the CCPC file and use that to display debt information to veterans. The challenge with this is if a veteran makes a payment before the next statement period, they cannot see up-to-date information in the portal. This causes confusion and extra work to determine if the account is up to date.</p>

<p>Because a veteran can visit more than one VAMC (or STA3N), the Financial Management team is using the (Integration Control Number) ICN to get the data for a given veteran.</p>

<h3 id="technical-understanding">Technical Understanding</h3>

<p>When a charge happens, it is first recorded in Integrated Billing Action (VistA file 350). This file has links to (or is pointed to) from the files that caused the charge–Prescriptions, Outpatient, and Inpatient.</p>

<p>At some point, a billing record is added to Accounts Receivable and AR Transaction (VistA file 433). Accounts Receivable has a single row for a given billing record, being updated with each transaction, while AR Transaction shows the various transactions. The charge from Integrated Billing Action appears in the AR Transaction file with an Accounts Receivable Trans. Type (VistA file 430.3) of “Increase Adjustment” (IEN = 1).</p>

<p>AR Transaction links to the Integrated Billing Action file with the field “Transaction Number” (433-.01). Not all rows in Integrated Billing Action may have a Transaction Number; this appears to be cancellations (or removed charges) as they link to their original transaction.</p>

<p>When payments are made, they can be either partial (AR Transaction Type of “PAYMENT (IN PART)”, IEN=2) or full (AR Transaction Type of “PAYMENT (IN FULL)”, IEN=34). If a partial payment is made, it is applied to any interest and admin fees first before being applied to the principal. These transactions will show as line items in the AR Transaction file while the Accounts Receivable row will be updated, including any balances for that given bill.</p>

<p>A charge can be removed (cancelled). This will show in the IB Action table and may have a corresponding row in the AR Transaction table with an AR Transaction Type of “Decrease Adjustment” (IEN=35). The original row in IB Action is updated with the Charge Removal Reason along with the IB Action row that is the removal. Both will have positive amount values, but they are meant to cancel each other out.</p>

<p>If the veteran does not pay in a timely fashion, interest and administrative fees will be added. These will appear in the AR Transaction table with an AR Transaction type of IEN=12 ADMIN.COST CHARGE or IEN=13 INTEREST/ADM. CHARGE. Per the Lighthouse team, IEN=14 EXEMPT INT/ADM. COST is the cancellation/removal of the interest and admin fees, however, this has not been confirmed, especially with the business.</p>

<p>Other than balances for each bill, account level or statement level balances are not stored in VistA and thus not in CDW.</p>

<h3 id="fhir-analysis-and-design">FHIR Analysis and Design</h3>

<p>A Lighthouse team member who was familiar with Mumps code reviewed the CCPC file source code and constructed it into a SQL statement (“Load AR_CCPC_Statements.sql”) to pull data to be used in a new FHIR API.</p>

<p>Using this SQL in conjunction with the data in the CCPC file, the data was mapped to FHIR. FHIR R4 was used as the base for the mapping, with some fields pre-adopted from FHIR R5.</p>

<p>Statement is not a concept that exists in FHIR R4 but is being considered for FHIR R6. However, the “statement” for the veteran does not exist in VistA or CDW; it is programmatically created on the Statement Day assigned to the veteran, thus the data has been mapped to other FHIR resources that represent the data.</p>

<h4 id="account-resource">Account Resource</h4>

<p>Any data that related to the patient and not a specific bill was mapped to the account resource. This includes Statement Day (as an extension named <a href="StructureDefinition-account-statementGenerationDay.html">StatementGenerationDay</a>), patient billing address (not yet in CDW), and account number. StatementGenerationDay can be used by the consuming app to display bills grouped as monthly “statements”.</p>

<p>Account number is made up of 3 fields concatenated together: the Sta3n, the Patient.IEN (paded with leading 0's to make 13 digits), and the first 5 characters of the LastName. The Patient IEN was confirmed with the Financial Management team for VistA. This format aligns with what is necessary for the veteran to make a payment on pay.va.gov. Oracle uses a different value than the IEN, however, this was not mapped. Data for display on the portal will only come from VistA at the present.</p>

<h4 id="invoice-resource">Invoice Resource</h4>

<p>The data that is assigned to a billing reference (also called bill number) has been mapped to the Invoice resource. Invoice seems to align with the concept of a bill. Invoice is the container for the items on the bill, including charges, charge cancellations, interest, and admin fees; payments are tied to invoice through PaymentReconciliation using a FHIR R5 extension to link to the bill from allocation.</p>

<h4 id="chargeitem-resource">ChargeItem Resource</h4>

<p>Each invoice can have line items and these line items can be described as CodeableConcepts or as a reference to chargeItem. Because the Financial Management team would like more details about the individual charges, chargeItem was used so that it could reference Encounter (for inpatient and outpatient copays) and MedicationDispense (for prescription copays) along with details about the charge, such as dates and performers.</p>

<p>Similarly, interest and admin fees could be line items on a bill. These were also mapped using ChargeItem so that the date charged is separate from the bill details.</p>

<h4 id="paymentreconciliation-resource">PaymentReconciliation Resource</h4>

<p>While payments could be considered a bill line item, ChargeItem does not provide details specific to payments so the PaymentReconciliation resource was used to map payments. PaymentReconciliation in FHIR R4 did not have linkage to the patient/debtor, so a FHIR R5 extension was pre-adopted to be able to link the payment to the patient. PaymentReconciliation also did not have a field to indicate the invoice the payment was for so allocation was pre-adopted from FHIR R5.</p>

<h3 id="debt-portal-conceptual-diagram">Debt Portal Conceptual Diagram</h3>
<p><img src="debtportal.png" alt="debt portal" />
<br clear="both" /></p>



</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="overview.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="vitals.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2025 <a style="color:var(--footer-hyperlink-text-color)" href="https://www.va.gov">VA</a>.  Package va.maps#1.5.11 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Thu, May 8, 2025 08:25+0000">2025-05-08</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
| <a style="color: #81BEF7" target="_blank" href="https://leaf.va.gov/NATIONAL/776/va_fhir_community_of_practice/?a=newform">Propose a change</a>
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->

  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

