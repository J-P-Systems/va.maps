<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>FHIR Design Patterns - US Veterans Health Administration FHIR Map Set Implementation Guide v1.5.11</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
  	<link href="assets/css/cqf.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->
    <link href="assets/css/va-maps.css" rel="stylesheet"/>

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"2.3"}
    h3,h4,h5,h6{--heading-prefix:"2.3"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->

        <!-- Placeholder for child template header declarations -->

<div id="project-nav">
    <a id="family-logo" no-external="true" href="https://va.gov"><img height="50" alt="Visit the VA website"
        src="assets/images/va.png" /> </a>
</div>

<div id="family-nav">
    <a id="family-logo" no-external="true" href="http://hl7.org/fhir"><img height="50" alt="Visit the FHIR website" src="assets/images/fhir-logo-www.png"/> </a>
</div>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">US Veterans Health Administration FHIR Map Set Implementation Guide</span>
            <br/>
            <span style="display:inline-block;">1.5.11 - 250601



  <img alt="United States of America flag" src="assets/images/usa.svg" height="16" title="United States of America"/>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Home</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Background
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="process.html">Process</a>
      </li>
      <li>
        <a href="profileHierarchy.html">Profile Hierarchy</a>
      </li>
      <li>
        <a href="designPatterns.html">FHIR Design Patterns</a>
      </li>
      <li>
        <a href="classes.html">Classes</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Use Cases
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="overview.html">Overview</a>
      </li>
      <li>
        <a href="debtPortal.html">Debt Portal</a>
      </li>
      <li>
        <a href="vitals.html">Vitals</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">FHIR Artifacts
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="artifacts.html">Artifacts</a>
      </li>
      <li>
        <a href="extensions.html">Extensions</a>
      </li>
      <li>
        <a href="mustSupport.html">Must Support</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="changes.html">Changes</a>
  </li>
  <li>
    <a href="history.html">History</a>
  </li>
  <li>
    <a href="mapset-qa.html">MapSet QA</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='0bg.html'><b>Background</b></a></li><li><b>FHIR Design Patterns</b></li>

          <span style="float:right;">

            <a href="profileHierarchy.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="classes.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Publication Build: This will be filled in by the publication tooling</p><!--EndReleaseHeader-->
  <h2>FHIR Design Patterns</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#design-decisions" id="markdown-toc-design-decisions">Design Decisions</a></li>
  <li><a href="#principles" id="markdown-toc-principles">Principles</a></li>
  <li><a href="#profiling-concept" id="markdown-toc-profiling-concept">Profiling Concept</a></li>
  <li><a href="#version" id="markdown-toc-version">Version</a></li>
  <li><a href="#environment" id="markdown-toc-environment">Environment</a></li>
  <li><a href="#mapping-approach" id="markdown-toc-mapping-approach">Mapping approach</a></li>
  <li><a href="#containment-and-reference" id="markdown-toc-containment-and-reference">Containment and reference</a></li>
  <li><a href="#terminology-mapping-approach" id="markdown-toc-terminology-mapping-approach">Terminology mapping approach</a></li>
  <li><a href="#extensions" id="markdown-toc-extensions">Extensions</a></li>
  <li><a href="#fhir-design-decisons" id="markdown-toc-fhir-design-decisons">FHIR design decisons</a></li>
</ul>

</div>
<h3 id="design-decisions">Design Decisions</h3>

<p>These design decisions have guided the mapping process. They are documented here to clarify why the maps were done the way they were and to support consensus across the enterprise.</p>

<h3 id="principles">Principles</h3>

<p>This guide follows two key principles:</p>
<ol>
  <li>The purpose of FHIR is to support interoperability. Every effort should be made to ensure that data will be comprehensible to receivers, including, to the extent possible, receivers without “out-of-band” communication channels to settle integration issues.
    <blockquote>
      <p><strong>Implications</strong>
Where possible, FHIR properties should be used in preference to extensions.
Tactics for doing so, in order:</p>
      <ul>
        <li>Using FHIR Core properties</li>
        <li>Using commonly recognized extensions that already exist</li>
        <li>Using elements from future releases of FHIR reproduced as extensions</li>
        <li>Creating new extensions and publishing them to support external comprehension
Extensions, where necessary, should include full documentation. A publicly available Implementation Guide, identified with a URL, is the best way to expose these designs; other tools may be necessary in the interim.</li>
      </ul>
    </blockquote>
  </li>
  <li>Health record semantics must be preserved. If FHIR is unable to support required patient information, extensions must be used.
    <blockquote>
      <p><strong>Implication</strong>
There will be cases where required FHIR values will be included in addition to more precise values in VA extensions; viz., status values.</p>
    </blockquote>
  </li>
</ol>

<h3 id="profiling-concept">Profiling Concept</h3>

<p>International Core FHIR resources are under-specified to support a variety of communities of support. Large communities can constrain those resources with profiles to support more specific expectations. This profiling can be repeated any number of times to constrain data to increasingly narrow expectations for increasingly specialized uses.</p>

<p>This Implementation Guide (IG) follows the US Core. The design supports the ability of implementers to create more specialized guides that will inherit the mappings from this guide without further effort.</p>

<h3 id="version">Version</h3>

<p>These maps follow FHIR US Core R5 (https://hl7.org/fhir/us/core/STU5.0.1/) where possible. Where profiles follow US Core guidance, they assert that conformance in the meta.profile element.</p>

<p>Migration to later versions will be undertaken per the specification of the enterprise FHIR version by the CIDMO Knowledge-Based Systems, Standards &amp; Terminology division.</p>

<h3 id="environment">Environment</h3>

<p>There are several interfaces providing access to patient record data, primarily held in VistA.</p>
<ul>
  <li>ECP provides data to CPRS.</li>
  <li>vx130 extracts data that is used in the Clinical Data Warehouse and to support integration with Millennium.</li>
  <li>VPR extracts data for use in the VA Data Integration Framework (VDIF) and for exchange in VHIE and JHIE.</li>
  <li>HDR</li>
  <li>
    <p>VIA
Rather than provide maps to each of these tools, we map VistA elements to FHIR. Implementers taking data from any of these interfaces should work with the interface owner to determine how that interface exposes the elements.</p>
  </li>
  <li>Persistence
Facade model
Write capabilities</li>
</ul>

<h3 id="mapping-approach">Mapping approach</h3>

<p>Element maps will use the following approaches, in order:</p>

<ol>
  <li>Where FHIR has fields that support VistA semantics directly, they will be mapped.
    <ul>
      <li>E.g., ADVERSE REACTION REPORTING - DATE/TIME OF EVENT (OBSERVATION) (120.85-.01) =&gt; AllergyIntolerance.reaction.onset</li>
    </ul>
  </li>
  <li>Terminology maps will support cases where a semantic match does not include a syntactic match.
    <ul>
      <li>E.g., Allergy mechanisms “A” and “P” (“allergy” and “pharmacologic”) are mapped to FHIR “allergy” and “intolerance” (“Allergy” and “Intolerance”).</li>
    </ul>
  </li>
  <li>First choice will be properties belonging to the “focal” FHIR resource. If no such property exists, this guidance may propose maps to “ancillary” FHIR resources.
    <ul>
      <li>Recommended
        <ul>
          <li>Encounters can be used to provide common context for different resources, when, e.g., a VistA record tracks patient location.
            <ul>
              <li>E.g., a VistA order contains information about the clinic or hospital where a medication was ordered (NON-VERIFIED ORDERS-APPOINTMENT DATE/TIME). FHIR MedicationRequest has no such property. It may, however, include a related Encounter resource, and this resource may record a location.</li>
            </ul>
          </li>
          <li>Observations capture information about patients and devices. They support rich metadata and complex nested structures. Several patient properties (including those concerning service history) imply nesting.
            <ul>
              <li>Create one Observation profile for each of these elements, or a general Observation profile with a value set for the codes? Each code may have a different value set for resulting values. These differences might be expressed as FHIR “slices,” but this would require some kind of bundle to collect and assert the slices.</li>
            </ul>
          </li>
          <li>Provenance resources are designed for capturing record management data; they are recommended where VistA captures this information, but the core FHIR resources do not. Provenance requires both a time and an agent; if one of these is not available, an extension on the base resource must be used. [Or Data Absent Reason extension in Provenance: is there a criterion for this decision?]</li>
          <li>DetectedIssue resources are designed to support drug checks and other decision support functions.</li>
        </ul>
      </li>
      <li>Not recommended
        <ul>
          <li>The AuditEvent resource is designed for capturing record management data. Unlike Provenance, it can capture events that do not modify data, and its use cases are typically assumed to involve security and other system administration duties.</li>
          <li>Questionnaires are typically to solicit information, and they can be used when the form of presentation more significant than data persistence. This is not the case for this project.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Where FHIR fields do not support VistA semantics, extensions are recommended.
    <ul>
      <li>Where available, we will adopt existing extensions.
        <ul>
          <li>E.g., us-core-race</li>
        </ul>
      </li>
      <li>Where no extensions exist, and future releases do (viz., for AMPL maps using STU3), we will pre-adopt properties.
        <ul>
          <li>E.g., 52.41-25 (PENDING OUTPATIENT ORDERS - PRIORITY) to http://hl7.org/fhir/4.0/StructureDefinition/extension-MedicationOrder.priority</li>
        </ul>
      </li>
      <li>Where neither of these is possible, we will create VA extensions
        <ul>
          <li>E.g., PATIENT ALLERGIES - OBSERVED/HISTORICAL (120.8-6) =&gt; http://va.gov/fhir/StructureDefinition/allergyintolerance-reactionObservationMode</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="containment-and-reference">Containment and reference</h3>

<p>Maps don't specify whether a referenced resource should be instantiated independently or as contained. It is expected that most resources will be independent. The less information a resource contains (e.g., a location name with no other information), or the less likely it is to be queried for independently (e.g., a service location in a patient record api), the more sense it may make to embed that information directly in the primary resource.</p>

<h3 id="terminology-mapping-approach">Terminology mapping approach</h3>

<p>We follow the guidance below for situations defined by the FHIR constraint (across the top) and VistA content (left column).</p>

<table class="grid table-striped">
  <thead>
    <tr>
      <th> </th>
      <th>VistA Content</th>
      <th>FHIR Target<br />1. CodeableConcept, optional binding</th>
      <th><br />2. CodeableConcept, required or extensible binding</th>
      <th><br />3. Code</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A</td>
      <td>VA data not coded</td>
      <td>CodeableConcept.text</td>
      <td>CodeableConcept.text<br /> Map to code if possible</td>
      <td>Map to code<br /> VA value in extension</td>
    </tr>
    <tr>
      <td>B</td>
      <td>VA codes are standard</td>
      <td>Code &amp; value in element<br /> Include standard system</td>
      <td>Code &amp; value in element<br /> Include standard system</td>
      <td>Code in element</td>
    </tr>
    <tr>
      <td>C</td>
      <td>VA codes with standard translations</td>
      <td>VA Code &amp; value in element<br /> Include VistA system URL &amp; ‘selected’<br /> Standard coding if available</td>
      <td>VA Code &amp; value in element<br /> Include VistA system URL &amp; ‘selected’<br /> Include standard coding</td>
      <td>Mapped code<br /> VA value in extension</td>
    </tr>
    <tr>
      <td>D</td>
      <td>VA codes without standard translations</td>
      <td>VA Code &amp; value in element<br /> VistA system URL</td>
      <td>Required: Not supported<br /> Extensible: use VA value</td>
      <td>Not supported<br /> VA value in extension</td>
    </tr>
  </tbody>
</table>

<p>Note: if there is no standard translation, then no separate .coding element should be instantiated.</p>

<h4 id="terminology-design-in-vista">Terminology design in VistA</h4>
<p>Note that in some cases, the VistA file structure is quite complex, and we do not reproduce it exhaustively. Ethnicity, for instance, is field 2-6 ETHNICITY INFORMATION, which points to file 2.06 ETHNICITY INFORMATION, which contains field .01 ETHNICITY INFORMATION, which points to file 10.2 ETHNICITY, which contains the values. If this guide is ever enhanced to support automated transformations, it will be necessary to articulate all of those steps, but for human readers it suffices to map 2-6 to the FHIR property – in this case, the complex extension property  Patient.extension[http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity].extension[ombCategory].</p>

<p>There are also cases where the VistA property contains a VA unique identifier (VUID) - a code from the Veterans Health Administration Terminology (VHAT), which interfaces such as CPRS and SDA then de-reference using a service such as Collaborative Terminology Tooling Data Management (CTTDM). This service design is also outside the scope of this guide.</p>

<h3 id="extensions">Extensions</h3>

<p>Maps will use existing Core elements where possible, expanding the solution space where necessary as follows:</p>
<ol>
  <li>US Core, with extensions</li>
  <li>FHIR Core</li>
  <li>FHIR Core extensions (including <a href="https://hl7.org/fhir/versions.html#extensions">preadopt R5 elements</a>)</li>
  <li><a href="extensions.html">VA extensions</a></li>
</ol>

<p>VA extensions will be necessary for more specialized use cases where VA processes require data not anticipated by FHIR core to be in the 80% of most common elements.</p>

<p>Where it is necessary to create new extensions to express VA-defined semantics, the extension name should represent the context of the requirement, rather than any particular implementation technology. E.g., the VA pharmacy-specific prescription status, which is more granular than the standard FHIR status, is named medicationrequest-pharmacyOrderStatus.</p>

<h3 id="fhir-design-decisons">FHIR design decisons</h3>

<h4 id="uniform-resource-identifiers">Uniform Resource Identifiers</h4>

<p>Different implementers may implement a variety of endpoints; these are subject to tactical constraints and are not addressed here. Definitional artifacts, however, require consistent definitional uris. For these artifacts, we define the VA FHIR definitional endpoint:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://va.gov/fhir/
</code></pre></div></div>

<p>This root supports definition canonical URIs for VA FHIR artifacts, e.g.,</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://va.gov/fhir/StructureDefinition/allergyintolerance
http://va.gov/fhir/ConceptMap/CMVFallergyActive
http://va.gov/fhir/ValueSet/VSVallergyActive
</code></pre></div></div>
<p>These terms use the CM and VS abbreviations for ConceptMap and ValueSet, and the VF abbreviation for VistA-to-FHIR.</p>

<p>Their status as "canonical" (or their form) may vary as the VA standards hosting architecture evolves.</p>

<h4 id="terminology-system-identifiers">Terminology System Identifiers</h4>

<p>Codes used in VistA must assert code systems, which also require URIs. These hierarchies, however, are not specific to FHIR:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://va.gov/terminology/vistaDefinedTerms
http://va.gov/terminology/vistaDefinedElements
</code></pre></div></div>

<p>These subhierarchies support definition of artifacts specific to VistA fields. Immunization reactions are recorded as "SET" type codes in VistA file 9000010.11, field .06, so the codes in that field have this generated system uri:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> "valueCodeableConcept": {
    "coding": [
     {
        "system": "http://va.gov/terminology/vistaDefinedTerms/9000010.11-.06",
        "display": "RASH OR ITCHING"
        "code": "5"
      }
    ],
    "text": "RASH OR ITCHING"
  },
</code></pre></div></div>
<p>If the code is from a lookup table, the table itself is the system: this allows the system to be used in any number of fields calling the table. Immunization, for instance, uses a CVX code table. When the CVX code is looked up, the system is the national CVX system, i.e., "http://hl7.org/fhir/sid/cvx". But that table also contains VA-defined values for historically recorded values for which the precise CVX is not known (e.g., "INFLUENZA (HISTORICAL)") and for vaccines not given (e.g., "INFLUENZA REFUSED/DECLINED (HISTORICAL)"). This value will be mapped to the CVX (required for immunization in US Core, but with the non-done status), and it will also contain the value from that file:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> "vaccineCode": {
    "coding": [
      {
        "system": "http://hl7.org/fhir/sid/cvx",
        "code": "88",
    "display": "influenza virus vaccine, unspecified formulation"
      },
     {
        "system": "http://va.gov/terminology/vistaDefinedTerms/9999999.14",
        "code": "REFUSED FLU (HISTORICAL)"
      }
    ],
    "text": "REFUSED FLU (HISTORICAL)"
  },
</code></pre></div></div>
<p>Similarly, elements in VistA that are to be represented as coded Observations need a code and system for the question. In these cases, we use VistA itself as the system, the field number as the code:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> "code": {
     {
        "system": "http://va.gov/terminology/vistaDefinedElements",
        "code": "2-.301",
		"display": "SERVICE CONNECTED?"
      }
  },
</code></pre></div></div>

<h4 id="identifiers">Identifiers</h4>
<h5 id="patients">Patients</h5>
<p>Patient identifers are VA ICNs scoped by the VA OID:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"identifier" : [{
	"system" : "urn:oid:2.16.840.1.113883.4.349",
	"value" : "1015128742V345328"
}],
</code></pre></div></div>
<p>This pattern can be used for any identifier unique in the scope of the VA enterprise.</p>

<p>(We do not at this time have access to Oracle Health or DoD EDI-PI identifiers.)</p>

<h5 id="organizations">Organizations</h5>
<p>This OID can describe the VA as an organization</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"identifier" : [{
	"value" : "urn:oid:2.16.840.1.113883.4.349"
}],
</code></pre></div></div>

<p>It can also be used as a root to scope system boundaries, such as VistA implementations.</p>

<p>Each VistA implementation has an assigned facility code, corresponding to the "Sta3n" of its primary medical center. Interfaces that consolidate data from across VAMCs use these codes to distinguish records that may have non-unique local identifiers in their respective VistA implementations,</p>
<ul>
  <li>VIA as the <code class="language-plaintext highlighter-rouge">&lt;assigningFacility&gt;</code> element</li>
  <li>VPR as the code attribute within <code class="language-plaintext highlighter-rouge">&lt;facility&gt;</code> element</li>
  <li>CDW as the 'Sta3n' column</li>
</ul>

<p>The simplest way these codes can be used to define namespaces within the VA namespace is by adding a node to the base OID, which can then scope the (otherwise not reliably unique) identifier:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"identifier" : [{
	"system" : "urn:oid:2.16.840.1.113883.4.349.508",
	"value" : "12345"
}],
</code></pre></div></div>
<p>Note that the VAST (VHA Site Tracking) department, charged by <a href="https://www.va.gov/vhapublications/ViewPublication.asp?pub_ID=3185">VHA DIRECTIVE 1044</a>, maintains a list of OIDs for VA locations, and the OIDs for VAMCs can be used to identify VistA instances. These OIDs are usually produced by concatenating the base OID with the VISN, the Sta3n, and the index of the row of the spreadsheet in which they appear, but in 62 of 1737 rows of  that spreadsheet, values are hard-coded, presumably due to prior assignment.</p>

<p>Example: VAMC 508 is in VISN 7, and it appears in row 430 of the spreadsheet:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"identifier" : [{
	"system" : "urn:oid:2.16.840.1.113883.4.349.7.508.430",
	"value" : "12345"
}],
</code></pre></div></div>
<p>We do not currently know of a service that can provide up-to-date VAST assignments based on facility code. We also observe that we need these OIDs to identify systems, whereas the VAST OIDs are defined as locations of care. For these reasons, we recommend using the first approach rather than the VAST approach, at least in the interim.</p>

<h5 id="organizational-parts">Organizational Parts</h5>
<p>Plan-Net lists partOf as a must-support property for organizations and locations. It does not specify whether this relationship is intended to represent a global container (e.g., the VA), a proximal container (e.g., the building in which a clinic is located), or some intermediate value (e.g., VAMC or VISN). Until we have business owners with specific requirements, we adopt the service (the Department of Veterans Affairs) as the target of Organization.partOf and the VAMC Sta3n as the target of Location.partOf. We have no requirement at this time to instantiate target resources for these references.</p>

<p>Organizations are part of the VA:</p>

<p>'''
  "partOf": {
    "identifier": "urn:oid:2.16.840.1.113883.4.349",
    "display": "Department of Veterans Affairs"
  }
'''
And Locations are part of their VAMC:
'''
  "partOf": {
    "identifier": "urn:oid:2.16.840.1.113883.4.349.508",
    "display": "Atlanta VA Health Care System"
  }
'''</p>

<h5 id="other-identifiers">Other identifiers</h5>
<p>For other VistA-assigned identifiers, the system must specify both the scope of the system assigning the identifier (the VAMC, identified by Sta3n) and the semantic scope of the thing identified. Following the terminology system approach assigned below, the file and field numbers are sufficient to provide this scope.</p>

<p>E.g., for a Prescription (file 52) Rx# (field .01) under the Atlanta VAMC (508):</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"identifier" : [{
	"system" : "http://va.gov/identifiers/508/52-.01",
	"value" : "3603899"
}],
</code></pre></div></div>

<h4 id="observation-patterns">Observation patterns</h4>

<p>The FHIR Observation resource contains a code property and a value property. This supports question/answer patterns such as Labs or Vitals, where the answer may be a quantity that is meaningless without knowing what is being quantified, which is stated in the code.</p>

<p>Sometimes, a VistA field answers a question that is implicit in a field name, such as "AGENT ORANGE EXPOS. INDICATED?" In these cases, we take the field name as the question code. There are many elements in the Patient file (2) that fit this description. To define the codeSystem for these cases, see Terminology System Identifiers, above.</p>

<p>VistA also contains a set of values called Health Factors that support extending the semantic model of VistA by adding new codes to a file rather than new elements to a data model. Some of these factors serve as question codes that can be paired with answers, such as "packs smoked per day". In this case, we follow the question/answer pattern as above, though we prefer to map the Health Factor to a standard, such as SNOMED CT. (In these cases, the axis would be Obervable Entity, or possibly Evaluation Procedure).</p>

<p>For many Health Factors, the factor entails a complete semantic statement, independent of a question or context. These codes can be mapped to SNOMED CT findings or situations. US Core provides a pattern for recording findings in FHIR by assigning a generic "category" question that can accomodate these finding codes without affecting their meaning. The Smoking Status profile demonstrates this pattern: it uses a broad LOINC "smoking status" question code, and it specifies values from the SNOMED CT finding axis, such as "smoker" or "former smoker". Those findings mean the same thing whether they are accompanied by that question code or not.</p>

<h4 id="codings-and-codeableconcepts">Codings and CodeableConcepts</h4>

<ul>
  <li>Codings SHALL always contain the source VistA Term or Entry alongside the required FHIR Coding. Terminology Mapping is defined in  mapParameters and results in ValueSet and ConceptMaps.</li>
</ul>

<h4 id="valuesets-and-conceptmaps">ValueSets and ConceptMaps</h4>

<ul>
  <li>ValueSets are named "VS{termmapname}" for the (required) FHIR values</li>
  <li>ValueSets are names "VS{termmapname}-vista" for the VistA values</li>
  <li>ConceptMaps are named "CM{termmapname}"</li>
</ul>

<h4 id="slices">Slices</h4>

<ul>
  <li>Use slicenames from the profiles</li>
  <li>All slices defined by the mappings are prefixed with "va-"</li>
</ul>

<h4 id="structuredefinition-profiles">StructureDefinition (Profiles)</h4>

<p>All elements with a VistA mapping …</p>

<ul>
  <li>… are marked <a href="mustSupport.html">must-support</a> <span style="padding-left: 3px; padding-right: 3px; color: white; background-color: red" title="This element must be supported">S</span></li>
  <li>… slices are added when used</li>
  <li>… extensions are added when used</li>
  <li>… optionally have 1 or more CDW mappings</li>
  <li>… optionally have 1 or more VPR mappings</li>
  <li>… can have a terminology mapping expressed as a ValueSet and a ConceptMap</li>
  <li>… can have a transform (e.g. string to boolean) expressed as a ValueSet and a ConceptMap using the 11179-permitted-value-conceptmap extension</li>
  <li>… reference types are constrained when defined as part of the mappings</li>
  <li>… fixed value unless there is a case</li>
</ul>

<h4 id="structuredefinition-va-extensions">StructureDefinition (VA Extensions)</h4>

<p>Defined in <a href="extensions.html">this IG</a> using namespace http://va.gov/fhir/StructureDefinition/</p>



</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="profileHierarchy.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="classes.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2025 <a style="color:var(--footer-hyperlink-text-color)" href="https://www.va.gov">VA</a>.  Package va.maps#1.5.11 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Thu, May 8, 2025 08:57+0000">2025-05-08</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
| <a style="color: #81BEF7" target="_blank" href="https://leaf.va.gov/NATIONAL/776/va_fhir_community_of_practice/?a=newform">Propose a change</a>
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->

  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

